<!doctype html>
<html class="no-js" xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Giỏ hàng</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" th:href="@{assets/img/favicon.ico}">
    <link rel="stylesheet" th:href="@{assets/css/bootstrap.min.css}">
    <!--owl carousel min css-->
    <link rel="stylesheet" th:href="@{assets/css/owl.carousel.min.css}">
    <!--slick min css-->
    <link rel="stylesheet" th:href="@{assets/css/slick.css}">
    <!--magnific popup min css-->
    <link rel="stylesheet" th:href="@{assets/css/magnific-popup.css}">
    <!--font awesome css-->
    <link rel="stylesheet" th:href="@{assets/css/font.awesome.css}">
    <!--ionicons css-->
    <link rel="stylesheet" th:href="@{assets/css/ionicons.min.css}">
    <!--7 stroke icons css-->
    <link rel="stylesheet" th:href="@{assets/css/pe-icon-7-stroke.css}">
    <!--animate css-->
    <link rel="stylesheet" th:href="@{assets/css/animate.css}">
    <!--jquery ui min css-->
    <link rel="stylesheet" th:href="@{assets/css/jquery-ui.min.css}">
    <!--plugins css-->
    <link rel="stylesheet" th:href="@{assets/css/plugins.css}">

    <!-- Main Style CSS -->
    <link rel="stylesheet" th:href="@{assets/css/style.css}">

    <!--modernizr min js here-->
    <script th:src="@{assets/js/vendor/modernizr-3.7.1.min.js}"></script>
</head>

<body>


<!--header area start-->

<!--offcanvas menu area start-->
<div class="off_canvars_overlay">

</div>
<div class="offcanvas_menu">
    <div class="container">
        <div class="row">
            <div class="col-12">

                <div class="offcanvas_menu_wrapper">
                    <div class="canvas_close">
                        <a href="javascript:void(0)"><i class="ion-android-close"></i></a>
                    </div>
                    <div class="header_search_box">
                        <form action="#">
                            <input placeholder="Search" type="text">
                            <button type="submit"><i class="fa fa-search" aria-hidden="true"></i></button>

                        </form>
                    </div>
                    <div id="menu" class="text-left ">
                        <ul class="offcanvas_main_menu">
                            <li class="menu-item-has-children active">
                                <a href="#">Home</a>
                                <ul class="sub-menu">
                                    <li><a href="index.html">Home 1</a></li>
                                    <li><a href="index-2.html">Home 2</a></li>
                                    <li><a href="index-3.html">Home 3</a></li>
                                    <li><a href="index-4.html">Home 4</a></li>
                                    <li><a href="index-5.html">Home 5</a></li>
                                    <li><a href="index-6.html">Home 6</a></li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children">
                                <a href="#">Shop</a>
                                <ul class="sub-menu">
                                    <li class="menu-item-has-children">
                                        <a href="#">Shop Layouts</a>
                                        <ul class="sub-menu">
                                            <li><a href="shop.html">shop</a></li>
                                            <li><a href="shop-fullwidth.html">Full Width</a></li>
                                            <li><a href="shop-fullwidth-list.html">Full Width list</a></li>
                                            <li><a href="shop-right-sidebar.html">Right Sidebar </a></li>
                                            <li><a href="shop-right-sidebar-list.html"> Right Sidebar list</a></li>
                                            <li><a href="shop-list.html">List View</a></li>
                                        </ul>
                                    </li>
                                    <li class="menu-item-has-children">
                                        <a href="#">other Pages</a>
                                        <ul class="sub-menu">
                                            <li><a href="cart.html">cart</a></li>
                                            <li><a href="wishlist.html">Wishlist</a></li>
                                            <li><a href="checkout.html">Checkout</a></li>
                                            <li><a href="my-account.html">my account</a></li>
                                            <li><a href="404.html">Error 404</a></li>
                                        </ul>
                                    </li>
                                    <li class="menu-item-has-children">
                                        <a href="#">Product Types</a>
                                        <ul class="sub-menu">
                                            <li><a href="product-details.html">product details</a></li>
                                            <li><a href="product-sidebar.html">product sidebar</a></li>
                                            <li><a href="product-grouped.html">product grouped</a></li>
                                            <li><a href="variable-product.html">product variable</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children">
                                <a href="#">blog</a>
                                <ul class="sub-menu">
                                    <li><a href="blog.html">blog</a></li>
                                    <li><a href="blog-details.html">blog details</a></li>
                                    <li><a href="blog-fullwidth.html">blog fullwidth</a></li>
                                    <li><a href="blog-sidebar.html">blog sidebar</a></li>
                                </ul>

                            </li>
                            <li class="menu-item-has-children">
                                <a href="#">pages </a>
                                <ul class="sub-menu">
                                    <li><a href="about.html">About Us</a></li>
                                    <li><a href="services.html">services</a></li>
                                    <li><a href="faq.html">Frequently Questions</a></li>
                                    <li><a href="contact.html">contact</a></li>
                                    <li><a href="login.html">login</a></li>
                                    <li><a href="404.html">Error 404</a></li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children">
                                <a href="my-account.html">my account</a>
                            </li>
                            <li class="menu-item-has-children">
                                <a href="about.html">about Us</a>
                            </li>
                            <li class="menu-item-has-children">
                                <a href="contact.html"> Contact Us</a>
                            </li>
                        </ul>
                    </div>
                    <div class="offcanvas_footer">
                        <span><a href="#"><i class="fa fa-envelope-o"></i> info@yourdomain.com</a></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--offcanvas menu area end-->

<header>
    <div class="main_header">
        <div class="header_middle">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-4 col-md-4 col-3 col_canvas">
                        <div class="canvas_open">
                            <a href="javascript:void(0)"><i class="ion-navicon-round"></i></a>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-4 col-5">
                        <div class="logo">
                            <a th:href="@{/}"><img src="assets/img/logo/logo.png" alt=""></a>
                        </div>
                    </div>
                    <div class="col-lg-4 col_search">
                        <div class="header_search_box">
                            <form th:action="@{/search}" method="get">
                                <input name="keySearch" placeholder="Tìm kiếm sản phẩm yêu thích" type="text">
                                <input name="page" value="0" hidden type="text">
                                <button type="submit"><i class="fa fa-search" aria-hidden="true"></i></button>

                            </form>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-5 col-4">
                        <div class="cart_wishlist_area">
                            <div class="header_wishlist">
                                <a th:if="${isLogined == false}" th:href="@{/login}">
                                    <span style="font-size:13px !important; text-transform: uppercase">Đăng nhập</span>
                                </a>
                                <a th:if="${isLogined == true}" th:href="@{/get-customer-page}"><i class="fa fa-user"></i>
                                </a>
                            </div>
                            <div class="mini_cart_wrapper">
                                <a th:href="@{/cart}"><i class="fa fa-shopping-cart" aria-hidden="true"></i>
                                    <span class="cartitems"> Giỏ hàng</span>
                                </a>
                            </div>
                            <div th:if="${isLogined == true}" style="margin-left: 20px" class="header_wishlist">
                                <a  th:href="@{/logout}">
                                    <span style="font-size:13px !important; text-transform: uppercase">Đăng xuất</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="header_bottom sticky-header">
            <div class="container">
                <div class="row">
                    <div class="col-lg-10 offset-lg-1">
                        <!--main menu start-->
                        <div class="main_menu menu_position">
                            <nav>
                                <ul>
                                    <li><a class="active" th:href="@{/}">Trang chủ</a>
                                    </li>
                                    <li class="mega_items"><a href="#">Cửa hàng</a>
                                    </li>
                                    <li><a href="https://www.facebook.com/" target="_blank">blog</a>
                                    </li>
                                    <li><a href="#ourAccount"> Liên hệ với chúng tôi</a></li>
                                    <li><a href="#aboutUs"> về chúng tôi</a></li>
                                </ul>
                            </nav>
                        </div>
                        <!--main menu end-->
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
<!--header area end-->

<!--breadcrumbs area start-->
<div class="breadcrumbs_area  breadcrumbs_bg">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="breadcrumb_content">
                    <h3>Giỏ hàng</h3>
                    <ul>
                        <li><a th:href="@{/}">Trang chủ</a></li>
                        <li>Giỏ hàng</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<!--breadcrumbs area end-->

<!--shopping cart area start -->
<div class="shopping_cart_area">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="table_desc">
                    <form th:action="@{/update-cart}" method="POST" th:object="${cartForm}">
                        <div class="cart_page table-responsive">
                            <table>
                                <thead>
                                <tr>
                                    <th class="product_remove">Thao tác</th>
                                    <th class="product_thumb">Ảnh</th>
                                    <th class="product_name">Tên sản phẩm</th>
                                    <th class="product-price">Giá</th>
                                    <th class="product_quantity">Số lượng</th>
                                    <th class="product_total">Thành tiền</th>
                                </tr>
                                </thead>
                                <tbody>

                                <tr class="cart-container-js" th:each="cart, itemStat : ${cartForm.listCarts}">
                                    <td class="product_remove"><a
                                            th:href="@{'/delete-cart?cartId=' + ${cart.cartId}}"><i
                                            class="fa fa-trash-o"></i></a>
                                    </td>
                                    <input hidden th:name="|listCarts[${itemStat.index}].cartId|"
                                           th:value="${cart.getCartId()}"/>
                                    <td class="product_thumb"><a
                                            th:href="@{'detail?productId=' + ${cart.productsId}}"><img
                                            th:src="@{${'assets/img/product/' + cart.productImg}}" alt=""></a></td>
                                    <td class="product_name"><a
                                            th:href="@{'detail?productId=' + ${cart.productsId}}"
                                            th:text="${cart.productTitle}">Handbag fringilla</a>
                                    </td>
                                    <td class="product-price">
                                        <input type="text" readonly th:name="|listCarts[${itemStat.index}].productPrice|"  class="product-root-price-js" th:value="${cart.productPrice}"/>
                                    </td>
                                    <td class="product_quantity"><label>Số lượng</label>
                                        <input class="product-quantity-js" min="1" th:value="${cart.quantity}" th:max="${cart.maxQuantity}"
                                               value="1" type="number" th:name="|listCarts[${itemStat.index}].quantity|"></td>
                                    <td class="product_total total-form">
                                        <input type="text" class="product-form-price-js" th:name="|listCarts[${itemStat.index}].money|"
                                               th:value="${cart.getMoney()}"/>
                                    </td>
                                </tr>

                                </tbody>
                            </table>
                        </div>
                        <div class="cart_submit">
                            <button type="submit">Cập nhật giỏ hàng</button>
                        </div>
                    </form>

                </div>
            </div>
        </div>
        <!--coupon code area start-->
        <form class="coupon_area" th:action="@{/create-payment}" method="post">
            <div class="row">
                <div class="col-lg-4 col-md-2">
                    <div class="coupon_code left">
                    </div>
                </div>
                <div class="col-lg-8 col-md-8">
                    <div class="coupon_code right">
                        <h3>Hóa đơn</h3>
                        <div class="coupon_inner">
                            <div class="cart_subtotal">
                                <p>Tổng tiền</p>
                                <p class="cart_amount"><span class="total-bill-form-js">25000</span>VNĐ</p>
                            </div>
                            <div class="cart_subtotal ">
                                <p>Vận chuyển</p>
                                <p class="cart_amount"><span class="total-ship-form-js">25000</span>VNĐ</p>
                            </div>
                            <div class="cart_subtotal">
                                <p>Tổng cộng</p>
                                <p class="cart_amount"><span class="total-expense-js">500000</span>VNĐ</p>
                            </div>
                            <input type="text" hidden name="costForm" class="cost-form-js">
                            <div class="checkout_btn">
                                <button>Thanh toán</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <!--coupon code area end-->
    </div>
</div>
<!--shopping cart area end -->

<!--footer area start-->
<footer class="footer_widgets">
    <div class="footer_top">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-4 col-sm-6">
                    <div class="footer_list">
                        <div class="footer_list_title" id="aboutUs">
                            <h3>about us</h3>
                        </div>
                        <div class="footer_logo">
                            <a th:href="@{/}"><img src="assets/img/logo/logo.png" alt=""></a>
                        </div>

                    </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6">
                    <div class="footer_list">
                        <div class="footer_list_title">
                            <h3>Các chủ đề</h3>
                        </div>
                        <div class="footer_list_menu">
                            <ul>
                                <li><a href="#">Cổ điểm</a></li>
                                <li><a href="#">Hiện đại</a></li>
                                <li><a href="#">Cách tân</a></li>
                                <li><a href="#">Ấm áp</a></li>
                                <li><a href="#">Ngày hè mát mẻ</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4 col-sm-6">
                    <div class="footer_list">
                        <div class="footer_list_title">
                            <h3>Đặc điểm nổi bật</h3>
                        </div>
                        <div class="footer_contact">
                            <div class="footer_contact_list">
                                <div class="footer_contact_icon">
                                    <span>1</span>
                                </div>
                                <div class="footer_contact_text">
                                    <p>Thêm sản phẩm yêu thích vào giỏ hàng</p>
                                </div>
                            </div>
                            <div class="footer_contact_list">
                                <div class="footer_contact_icon">
                                    <span>2</span>
                                </div>
                                <div class="footer_contact_text">
                                    <p>Gọi cho chúng tôi để biết thêm thông tin về sản phẩm</p>
                                </div>
                            </div>
                            <div class="footer_contact_list">
                                <div class="footer_contact_icon">
                                    <span>3</span>
                                </div>
                                <div class="footer_contact_text">
                                    <p>Thanh toán qua thẻ tín dụng</p>
                                </div>
                            </div>
                            <div class="footer_contact_list">
                                <div class="footer_contact_icon">
                                    <span>4</span>
                                </div>
                                <div class="footer_contact_text">
                                    <p>Nhận sản phẩm trong 24 giờ</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4 col-sm-6">
                    <div class="footer_list" id="ourAccount">
                        <div class="footer_list_title">
                            <h3>Liên hệ với chúng tôi</h3>
                        </div>
                        <div class="footer_contact">
                            <div class="footer_contact_list">
                                <div class="footer_contact_icon">
                                    <span><i class="fa fa-phone"></i></span>
                                </div>
                                <div class="footer_contact_text">
                                    <p>Gọi cho chúng tôi <a href="tel:+001666951">+001 666 951</a></p>
                                    <p>Fax <a href="tel:+001678987"> +001 678 987</a></p>
                                </div>
                            </div>
                            <div class="footer_contact_list">
                                <div class="footer_contact_icon">
                                    <span><i class="fa fa-mobile"></i></span>
                                </div>
                                <div class="footer_contact_text">
                                    <p><a href="tel:+771231234">+77 123 1234</a></p>
                                    <p><a href="tel:+42989876"> +42 98 9876</a></p>
                                </div>
                            </div>
                            <div class="footer_contact_list">
                                <div class="footer_contact_icon">
                                    <span><i class="fa fa-envelope"></i></span>
                                </div>
                                <div class="footer_contact_text">
                                    <p><a href="mailto:http://1.envato.market/9LbxW">clothing@posthemes.com</a></p>
                                    <p><a href="mailto:http://1.envato.market/9LbxW">admin@posthemes.com</a></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer_social_newsletter">
        <div class="container">
            <div class="row">
                <div class="col-lg-5 col-md-4">
                    <div class="footer_social">
                        <ul>
                            <li><a href="#"><i class="fa fa-facebook-square"></i></a></li>
                            <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="#"><i class="fa fa-google"></i></a></li>
                            <li><a href="#"><i class="fa fa-dribbble"></i></a></li>
                            <li><a href="#"><i class="fa fa-behance"></i></a></li>
                        </ul>
                    </div>
                </div>
                <!--                <div class="col-lg-7 col-md-8">-->
                <!--                    <div class="newsletter_area">-->
                <!--                        <div class="newsletter_text">-->
                <!--                            <h2>Newsletter</h2>-->
                <!--                        </div>-->
                <!--                        <div class="subscribe_form">-->
                <!--                            <form id="mc-form" class="mc-form footer-newsletter">-->
                <!--                                <input id="mc-email" type="email" autocomplete="off"-->
                <!--                                       placeholder="Enter your e-mail"/>-->
                <!--                                <button id="mc-submit">Subscribe</button>-->
                <!--                            </form>-->
                <!--                            &lt;!&ndash; mailchimp-alerts Start &ndash;&gt;-->
                <!--                            <div class="mailchimp-alerts text-centre">-->
                <!--                                <div class="mailchimp-submitting"></div>&lt;!&ndash; mailchimp-submitting end &ndash;&gt;-->
                <!--                                <div class="mailchimp-success"></div>&lt;!&ndash; mailchimp-success end &ndash;&gt;-->
                <!--                                <div class="mailchimp-error"></div>&lt;!&ndash; mailchimp-error end &ndash;&gt;-->
                <!--                            </div>&lt;!&ndash; mailchimp-alerts end &ndash;&gt;-->
                <!--                        </div>-->
                <!--                    </div>-->
                <!--                </div>-->
            </div>
        </div>
    </div>
    <div class="footer_middle">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-4 col-sm-6">
                    <div class="footer_list">
                        <div class="footer_list_title">
                            <h3>Danh mục</h3>
                        </div>
                        <div class="footer_list_menu">
                            <ul>
                                <li><a href="#">Áo sơ mi</a></li>
                                <li><a href="#">Váy</a></li>
                                <li><a href="#">Áo khoác</a></li>
                                <li><a href="#">Trẻ em</a></li>
                                <li><a href="#">Người lớn</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4 col-sm-6">
                    <div class="footer_list">
                        <div class="footer_list_title">
                            <h3>Thông tin</h3>
                        </div>
                        <div class="footer_list_menu">
                            <ul>
                                <li><a href="#">Khuyến mãi</a></li>
                                <li><a href="#">Sản phẩm mới</a></li>
                                <li><a href="#">Bán chạy nhất</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4 col-sm-6">
                    <div class="footer_list">
                        <div class="footer_list_title">
                            <h3>Dịch vụ</h3>
                        </div>
                        <div class="footer_list_menu">
                            <ul>
                                <li><a href="#">Chính sách</a></li>
                                <li><a href="#">Vận chuyển</a></li>
                                <li><a href="#">Hoàn tiền</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4 col-sm-6">
                    <div class="footer_list">
                        <div class="footer_list_title">
                            <h3>Mở rộng</h3>
                        </div>
                        <div class="footer_list_menu">
                            <ul>
                                <li><a href="#"> Ưu đãi </a></li>
                                <li><a href="#"> Hàng mới </a></li>
                                <li><a href="#">Hàng chạy nhất</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer_bottom">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6 col-md-7">
                    <div class="copyright_area">
                        <p>Copyright © 2022 <a th:href="@{/}">Clothing shop</a>. <a href="https://hasthemes.com/"
                                                                                    target="_blank">All rights
                            reserved.</a></p>
                    </div>
                </div>
                <div class="col-lg-6 col-md-5">
                    <div class="footer_paypal text-right">
                        <a href="#"><img src="assets/img/icon/payment.png" alt=""></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
<script th:src="@{assets/js/vendor/jquery-3.5.0.min.js}"></script>
<!--popper min js-->
<script th:src="@{assets/js/popper.js}"></script>
<!--bootstrap min js-->
<script th:src="@{assets/js/bootstrap.min.js}"></script>
<!--owl carousel min js-->
<script th:src="@{assets/js/owl.carousel.min.js}"></script>
<!--slick min js-->
<script th:src="@{assets/js/slick.min.js}"></script>
<!--magnific popup min js-->
<script th:src="@{assets/js/jquery.magnific-popup.min.js}"></script>
<!--jquery countdown min js-->
<script th:src="@{assets/js/jquery.countdown.js}"></script>
<!--jquery ui min js-->
<script th:src="@{assets/js/jquery.ui.js}"></script>
<!--jquery elevatezoom min js-->
<script th:src="@{assets/js/jquery.elevatezoom.js}"></script>
<!--isotope packaged min js-->
<script th:src="@{assets/js/isotope.pkgd.min.js}"></script>
<!-- Plugins JS -->
<script th:src="@{assets/js/plugins.js}"></script>

<!-- Main JS -->
<script th:src="@{assets/js/main.js}"></script>
<script>
    const totalBill = document.querySelector(".total-bill-form-js");
    const expenditure = document.querySelector(".total-expense-js");
    const inputCost = document.querySelector(".cost-form-js");
    const getAllCarts = document.querySelectorAll(".product-quantity-js");
    processBill();
    Array.from(getAllCarts).forEach(function(item){
        item.addEventListener('change',function(event){
            const tdParent = event.target.parentNode;
            const trParent = tdParent.parentNode;
            const productPrice = trParent.querySelector(".product-root-price-js").value;
            const bill = trParent.querySelector(".product-form-price-js");
            const productQuantity = event.target.value;
            console.log(productPrice)  ;
            console.log(productQuantity);
            bill.value = productPrice * productQuantity;
            processBill();
        })
    });
    function processBill(){
        let price = totalPrice();
        totalBill.textContent = price;
        expenditure.textContent = price + 25000;
        inputCost.value = price + 25000;
    }

    function totalPrice(){
        let cost = 0
        const getContainerJs = document.querySelectorAll(".cart-container-js");
        Array.from(getContainerJs).forEach(function(item){
            const bill = item.querySelector(".product-form-price-js").value;
            cost = cost + Number(bill);
        });
        return cost
    }
</script>
</body>

</html>